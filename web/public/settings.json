{"ctrlSize":{"width":844,"height":390},"nodes":[{"width":514,"height":749,"id":"0","position":{"x":0,"y":200},"data":{"label":"raspi"},"type":"raspi","deletable":false,"positionAbsolute":{"x":0,"y":200}},{"width":235,"height":101,"id":"1682603658250:3","position":{"x":-381.33324432373047,"y":417.33331298828125},"data":{"label":"SteppingCWLimit"},"type":"driver_input","selected":false,"positionAbsolute":{"x":-381.33324432373047,"y":417.33331298828125},"dragging":false},{"id":"1682603637509:2","position":{"x":-313.333251953125,"y":202.6666259765625},"data":{"label":"LED1","cx":400,"cy":100,"color":"green"},"type":"ctrl_led","hidden":true,"positionAbsolute":{"x":-313.333251953125,"y":202.6666259765625}},{"width":253,"height":125,"id":"1682603431645:1","position":{"x":-289.3332824707031,"y":185.33331298828125},"data":{"label":"Stepping"},"type":"driver_stepping","selected":false,"positionAbsolute":{"x":-289.3332824707031,"y":185.33331298828125},"dragging":false},{"width":97,"height":91,"id":"1682518928145:3","position":{"x":100,"y":100},"data":{"label":"Turn R","cx":700,"cy":30,"r":5,"color":"black","symbol":"R"},"type":"ctrl_button","hidden":true,"positionAbsolute":{"x":100,"y":100}},{"width":97,"height":91,"id":"1682518861678:2","position":{"x":100,"y":100},"data":{"label":"Turn L","cx":100,"cy":30,"r":5,"color":"black","symbol":"L"},"type":"ctrl_button","hidden":true,"positionAbsolute":{"x":100,"y":100}},{"width":125,"height":91,"id":"1682518775016:1","position":{"x":183.59833007783087,"y":-21.1104012666011},"data":{"label":"Arm","cx":330,"cy":250,"r":25,"dir":"horizontal","momentary":true},"type":"ctrl_slider","hidden":true,"positionAbsolute":{"x":183.59833007783087,"y":-21.1104012666011},"selected":false,"dragging":false},{"width":281,"height":101,"id":"1682051339497:2","position":{"x":1361.9243641754458,"y":582.9195194539492},"data":{"label":"MoveRearR"},"type":"driver_pwmhbridge","selected":false,"positionAbsolute":{"x":1361.9243641754458,"y":582.9195194539492},"dragging":false},{"width":281,"height":101,"id":"1682051334799:1","position":{"x":859.9243641754458,"y":574.9195194539492},"data":{"label":"MoveRearL"},"type":"driver_pwmhbridge","selected":false,"positionAbsolute":{"x":859.9243641754458,"y":574.9195194539492},"dragging":false},{"width":119,"height":91,"id":"1681915156204:2","position":{"x":375.1773462536293,"y":19.789508087899236},"data":{"label":"Speed1","cx":480,"cy":246,"r":30,"max":3},"type":"ctrl_crown","hidden":true,"positionAbsolute":{"x":375.1773462536293,"y":19.789508087899236},"selected":false,"dragging":false},{"width":119,"height":91,"id":"1681915119780:1","position":{"x":573.3166949182381,"y":18.447099793197822},"data":{"label":"Speed0","cx":550,"cy":246,"r":30,"max":3},"type":"ctrl_crown","hidden":true,"positionAbsolute":{"x":573.3166949182381,"y":18.447099793197822},"selected":false,"dragging":false},{"width":281,"height":101,"id":"1680013397425:5","position":{"x":869.077766870689,"y":261.4134609918295},"data":{"label":"MoveFrontL"},"type":"driver_pwmhbridge","selected":false,"positionAbsolute":{"x":869.077766870689,"y":261.4134609918295},"dragging":false},{"width":281,"height":101,"id":"1680013390848:4","position":{"x":1375.1547669891752,"y":264.91574132772297},"data":{"label":"MoveFrontR"},"type":"driver_pwmhbridge","selected":false,"positionAbsolute":{"x":1375.1547669891752,"y":264.91574132772297},"dragging":false},{"width":147,"height":91,"id":"1682055598590:1","position":{"x":1174,"y":-221.125},"data":{"label":"Move","cx":120,"cy":250,"r":6},"type":"ctrl_analogpad","selected":false,"positionAbsolute":{"x":1174,"y":-221.125},"dragging":false}],"edges":[{"source":"1680013304387:1","sourceHandle":"value","target":"1680013397425:5","targetHandle":"duty","id":"reactflow__edge-1680013304387:1value-1680013397425:5duty"},{"source":"1680013304387:1","sourceHandle":"value","target":"1680013390848:4","targetHandle":"duty","id":"reactflow__edge-1680013304387:1value-1680013390848:4duty"},{"source":"1680013397425:5","sourceHandle":"pin1","target":"0","targetHandle":"8","id":"reactflow__edge-1680013397425:5pin1-08"},{"source":"1680013397425:5","sourceHandle":"pin2","target":"0","targetHandle":"10","id":"reactflow__edge-1680013397425:5pin2-010"},{"source":"1680013397425:5","sourceHandle":"pwm","target":"0","targetHandle":"12","id":"reactflow__edge-1680013397425:5pwm-012"},{"source":"1680013390848:4","sourceHandle":"pin1","target":"0","targetHandle":"16","id":"reactflow__edge-1680013390848:4pin1-016"},{"source":"1680013390848:4","sourceHandle":"pin2","target":"0","targetHandle":"18","id":"reactflow__edge-1680013390848:4pin2-018"},{"source":"1680013390848:4","sourceHandle":"pwm","target":"0","targetHandle":"12","id":"reactflow__edge-1680013390848:4pwm-012"},{"source":"1682051334799:1","sourceHandle":"pin1","target":"0","targetHandle":"22","id":"reactflow__edge-1682051334799:1pin1-022"},{"source":"1682051334799:1","sourceHandle":"pin2","target":"0","targetHandle":"24","id":"reactflow__edge-1682051334799:1pin2-024"},{"source":"1682051334799:1","sourceHandle":"pwm","target":"0","targetHandle":"12","id":"reactflow__edge-1682051334799:1pwm-012"},{"source":"1682051339497:2","sourceHandle":"pin1","target":"0","targetHandle":"26","id":"reactflow__edge-1682051339497:2pin1-026"},{"source":"1682051339497:2","sourceHandle":"pin2","target":"0","targetHandle":"28","id":"reactflow__edge-1682051339497:2pin2-028"},{"source":"1682051339497:2","sourceHandle":"pwm","target":"0","targetHandle":"12","id":"reactflow__edge-1682051339497:2pwm-012"},{"source":"1682603431645:1","sourceHandle":"clk","target":"0","targetHandle":"7","id":"reactflow__edge-1682603431645:1clk-07"},{"source":"1682603431645:1","sourceHandle":"dir","target":"0","targetHandle":"11","id":"reactflow__edge-1682603431645:1dir-011"},{"source":"1682603431645:1","sourceHandle":"limit1","target":"0","targetHandle":"5","id":"reactflow__edge-1682603431645:1limit1-05"},{"source":"1682603431645:1","sourceHandle":"limit2","target":"0","targetHandle":"3","id":"reactflow__edge-1682603431645:1limit2-03"},{"source":"1682603658250:3","sourceHandle":"pin","target":"0","targetHandle":"5","id":"reactflow__edge-1682603658250:3pin-05"}],"pins":[{"index":3,"gpio":2,"feature":"in"},{"index":5,"gpio":3,"feature":"in"},{"index":7,"gpio":4,"feature":"clk0"},{"index":8,"gpio":14,"feature":"out"},{"index":10,"gpio":15,"feature":"out"},{"index":11,"gpio":17,"feature":"out"},{"index":12,"gpio":18,"feature":"pwm0"},{"index":16,"gpio":23,"feature":"out"},{"index":18,"gpio":24,"feature":"out"},{"index":22,"gpio":25,"feature":"out"},{"index":24,"gpio":8,"feature":"out"},{"index":26,"gpio":7,"feature":"out"},{"index":28,"gpio":1,"feature":"out"}],"drivers":[{"id":"1682603658250:3","type":"driver_input","pin":5},{"id":"1682603431645:1","type":"driver_stepping","clk":7,"dir":11,"limit1":5,"limit2":3},{"id":"1682051339497:2","type":"driver_pwmhbridge","pin1":26,"pin2":28,"pwm":12},{"id":"1682051334799:1","type":"driver_pwmhbridge","pin1":22,"pin2":24,"pwm":12},{"id":"1680013397425:5","type":"driver_pwmhbridge","pin1":8,"pin2":10,"pwm":12},{"id":"1680013390848:4","type":"driver_pwmhbridge","pin1":16,"pin2":18,"pwm":12}],"code":{"1682055598590:1":"(async function(ctx, { x, y }) {\n    // await ctx.act('hbriidge driver label', { in1: true, in2: false });\n    // await ctx.act('pwm hbridge driver label', { in1: true, in2: false,  });\n    // await ctx.act('pwm driver label', { in1: true, in2: false });\n\n    const duty = ctx.state['Speed0']?.value ?? 0.0;\n    const ax = Math.abs(x);\n    const ay = Math.abs(y);\n    \n    if (ax < 0.2 && y > 0.9) {\n         await ctx.act([\n            ['MoveFrontR', { in1: true, in2: false, duty }],\n            ['MoveFrontL', { in1: true, in2: false, duty }],\n            ['MoveRearR', { in1: true, in2: false, duty }],\n            ['MoveRearL', { in1: true, in2: false, duty }]\n         ]);\n    } \n    else if (ax < 0.2 && y < -0.9) {\n        await ctx.act([\n            ['MoveFrontR', { in1: false, in2: true, duty }],\n            ['MoveFrontL', { in1: false, in2: true, duty }],\n            ['MoveRearR', { in1: false, in2: true, duty }],\n            ['MoveRearL', { in1: false, in2: true, duty }]\n         ]);\n    }\n    else if (x > 0.9 && ay < 0.2) {\n        await ctx.act([\n            ['MoveFrontR', { in1: false, in2: true, duty }],\n            ['MoveFrontL', { in1: true, in2: false, duty }],\n            ['MoveRearR', { in1: true, in2: false, duty }],\n            ['MoveRearL', { in1: false, in2: true, duty }]\n         ]);\n    }\n    else if (x < -0.9 && ay < 0.2) {\n        await ctx.act([\n            ['MoveFrontR', { in1: true, in2: false, duty }],\n            ['MoveFrontL', { in1: false, in2: true, duty }],\n            ['MoveRearR', { in1: false, in2: true, duty }],\n            ['MoveRearL', { in1: true, in2: false, duty }]\n         ]);\n    }\n    else if (x > 0.5 && y > 0.5) {\n        await ctx.act([\n            ['MoveFrontR', { in1: false, in2: false, duty }],\n            ['MoveFrontL', { in1: true, in2: false, duty }],\n            ['MoveRearR', { in1: true, in2: false, duty }],\n            ['MoveRearL', { in1: false, in2: false, duty }]\n         ]);\n    }\n    else if (x < -0.5 && y > 0.5) {\n        await ctx.act([\n            ['MoveFrontR', { in1: true, in2: false, duty }],\n            ['MoveFrontL', { in1: false, in2: false, duty }],\n            ['MoveRearR', { in1: false, in2: false, duty }],\n            ['MoveRearL', { in1: true, in2: false, duty }]\n         ]);\n    }\n    else if (x < -0.5 && y < -0.5) {\n        await ctx.act([\n            ['MoveFrontR', { in1: false, in2: true, duty }],\n            ['MoveFrontL', { in1: false, in2: false, duty }],\n            ['MoveRearR', { in1: false, in2: false, duty }],\n            ['MoveRearL', { in1: false, in2: true, duty }]\n         ]);\n    }\n    else if (x > 0.5 && y < -0.5) {\n        await ctx.act([\n            ['MoveFrontR', { in1: false, in2: false, duty }],\n            ['MoveFrontL', { in1: false, in2: true, duty }],\n            ['MoveRearR', { in1: false, in2: true, duty }],\n            ['MoveRearL', { in1: false, in2: false, duty }]\n         ]);\n    }\n    else {\n        await ctx.act([\n            ['MoveFrontR', { in1: false, in2: false, duty:0 }],\n            ['MoveFrontL', { in1: false, in2: false, duty:0 }],\n            ['MoveRearR', { in1: false, in2: false, duty:0 }],\n            ['MoveRearL', { in1: false, in2: false, duty:0 }]\n         ]);\n    }\n})","1681915156204:2":"(async function(ctx, { value }) {\n    // await ctx.act('hbriidge driver label', { in1: true, in2: false });\n    // await ctx.act('pwm hbridge driver label', { in1: true, in2: false,  });\n    // await ctx.act('pwm driver label', { in1: true, in2: false });\n    console.log('speed 1', value)\n})","1681915119780:1":"(async function(ctx, { value }) {\n    // await ctx.act('hbriidge driver label', { in1: true, in2: false });\n    // await ctx.act('pwm hbridge driver label', { in1: true, in2: false,  });\n    // await ctx.act('pwm driver label', { in1: true, in2: false });\n    console.log('speed0', value)\n})","1682518928145:3":"(async function(ctx, { press }) {\n    if (press) {\n        const duty = ctx.state['Speed0']?.value ?? 0.0;\n        await ctx.act([\n            ['MoveFrontR', { in1: false, in2: true, duty }],\n            ['MoveFrontL', { in1: true, in2: false, duty }],\n            ['MoveRearR', { in1: false, in2: true, duty }],\n            ['MoveRearL', { in1: true, in2: false, duty }]\n         ]);\n    }\n    else {\n        await ctx.act([\n            ['MoveFrontR', { in1: false, in2: false, duty: 0 }],\n            ['MoveFrontL', { in1: false, in2: false, duty: 0 }],\n            ['MoveRearR', { in1: false, in2: false, duty: 0 }],\n            ['MoveRearL', { in1: false, in2: false, duty: 0 }]\n         ]);\n    }\n    ctx.update([\n        ['LED1', { value: press }]\n    ])\n})","1682518861678:2":"(async function(ctx, { press }) {\n    if (press) {\n        const duty = ctx.state['Speed0']?.value ?? 0.0;\n        await ctx.act([\n            ['MoveFrontR', { in1: true, in2: false, duty }],\n            ['MoveFrontL', { in1: false, in2: true, duty }],\n            ['MoveRearR', { in1: true, in2: false, duty }],\n            ['MoveRearL', { in1: false, in2: true, duty }]\n         ]);\n    }\n    else {\n        await ctx.act([\n            ['MoveFrontR', { in1: false, in2: false, duty: 0 }],\n            ['MoveFrontL', { in1: false, in2: false, duty: 0 }],\n            ['MoveRearR', { in1: false, in2: false, duty: 0 }],\n            ['MoveRearL', { in1: false, in2: false, duty: 0 }]\n         ]);\n    }\n})","1682518775016:1":"(async function(ctx, { value }) {\n    const dir = value > 0;\n    const freq = Math.abs(value);\n    await ctx.act([\n        ['Stepping', { dir, freq }]\n    ])\n})","1682603658250:3":"(async function(ctx, { out }) {\n    ctx.update([\n        ['LED1', { value: out }]\n    ])\n})"}}